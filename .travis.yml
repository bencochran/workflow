sudo: false

branches:
  except:
    - gh-pages

notifications:
  email: false

matrix:
  include:
    - language: android
      jdk: oraclejdk8
      env:
        - secure: "SWQBLsaI5fOfiM+48/oAOcynsnpa1hHADxs8Vsmt7gsqVrtL369znwsX+PkNOXTdAROPKHzfCw1PkMSKiWHwSB+Gc8fMqFoVjxPnpi0NAhm2b4q4pq6GLOed2xF93eLoQZ7x4UwcUie58Qlwif9ZSGyp+7V6fEy7/AexGLPAuD0="
        - secure: "gFmZ18DktyZonExeAYGT4HtCodvAbRcH94AImWG6DrJZFzGkRSN//s1AjrgkAL/jZ4lLuoxyCs1nBoX2U83LmpJ8KxLIhU/45JlJgmD1tnE2zdFim6dHN+J6Yj7MCWqD5KO6E0dJickTJG2XzFu0oN3vBn7sETliQHzlw2lw8ME="
      before_install:
        - cd kotlin
        - mkdir "$ANDROID_HOME/licenses" || true
        - echo "24333f8a63b6825ea9c5514f83c2829b004d1fee" > "$ANDROID_HOME/licenses/android-sdk-license"
      cache:
        directories:
          - $HOME/.gradle/caches/
          - $HOME/.gradle/wrapper/
          - $HOME/.m2
    - language: swift
      os: osx
      osx_image: xcode10.1
      before_install:
      - gem update --system
      - gem install bundler
      script:
      - bundle exec pod lib lint Workflow.podspec --allow-warnings
    - language: node_js
      node_js:
        - "stable"
      env:
        - secure: "T1YsALLEax0UZwjOTmnuUCDQsh5Xiyh5Li2AfPw+z3o8hwwU01Q6DFgaHAZxYIY17OKNaJ69k419jkKFBD7gQT5bkgkFjNNLC3mVZ/ydxIgbmk8jx+GDte18JsJ4vdZY5ErJPAMDGhjjQnyn/73nNgonPt97ISYSrTokomK6iJ48Su0B2tVwDISrC2y2gFtcSpFhoDAp5NchhnhI+9925yTG1p0O0yrflgz2gfRKc+DZg+hUyoyjqOztAqOHwKuywsgv8xoxTyMAtWsF7G1VR8Vo45P3WgZxiYw3snmHGw44m+ZqwTVTuYMV2HOf/hFKj0jDQ9JJ2SXh28Di3eJhKuia+hLrTV3ZNfNHThbzeaNGrUG5ohR/J8k1wc5oWvYpbUy2Kv5ACf34iEdO4BvaQ3DSNY/6eNZO3RJ4Z9eVQbOSxXRrckbK41RNjS5eVHahBA+bkjlSsq/aR/MvsaErRCrmZ1AX3BdiJ/5SeSlgTQF62VUJQVAETLFNQZ3s4w6i2VkfflfOTFHA3VNARUchD20/tNZ9PBRDK7+o/k61Sw6FTkC1PNKRhQKjnenYfST+lQsB78GENVwUoVqGSTuUMT7E+sGpAKM6TWiWt79dtZ8KrZvV2GtfXYU08ZAg9N0PJVftAZDualSji0MAG6FO12fHAX6OHMUkSvFGj9lFL0g="
      cache:
        directories:
          - node_modules
      script:
        - cd docs
        - yarn install
        - yarn test
        - yarn build --prefix-paths
      deploy:
        provider: pages
        skip-cleanup: true
        github-token: $GITHUB_TOKEN
        local-dir: public
        target-branch: gh-pages
        on:
          branch: master
